!function(){function t(e,n){return(t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(e,n)}function e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var i,o=r(t);if(e){var c=r(this).constructor;i=Reflect.construct(o,arguments,c)}else i=o.apply(this,arguments);return n(this,i)}}function n(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{yq0Q:function(n,r,o){"use strict";o.r(r),o.d(r,"ChaptersModule",function(){return W});var a,s=o("tyNb"),h=o("Ykyv"),u=o("2Vo4"),p=o("D0XW"),f=o("7o/Q"),l=o("WMd4"),d=function(){function t(e,n){i(this,t),this.delay=e,this.scheduler=n}return c(t,[{key:"call",value:function(t,e){return e.subscribe(new b(t,this.delay,this.scheduler))}}]),t}(),b=function(n){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&t(e,n)}(o,n);var r=e(o);function o(t,e,n){var c;return i(this,o),(c=r.call(this,t)).delay=e,c.scheduler=n,c.queue=[],c.active=!1,c.errored=!1,c}return c(o,[{key:"_schedule",value:function(t){this.active=!0,this.destination.add(t.schedule(o.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}},{key:"scheduleNotification",value:function(t){if(!0!==this.errored){var e=this.scheduler,n=new g(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}}},{key:"_next",value:function(t){this.scheduleNotification(l.a.createNext(t))}},{key:"_error",value:function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleNotification(l.a.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){for(var e=t.source,n=e.queue,r=t.scheduler,i=t.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1}}]),o}(f.a),g=function t(e,n){i(this,t),this.time=e,this.notification=n},m=o("fXoL"),v=((a=function t(e){i(this,t),this.viewContainerRef=e}).\u0275fac=function(t){return new(t||a)(m.Jb(m.P))},a.\u0275dir=m.Eb({type:a,selectors:[["","appChapterContent",""]]}),a),C=o("dJ3e"),y=o("ofXK"),O=o("XiUz"),w=o("Wp6s"),P=o("sKXY"),_=o("6NWb"),x=function(t){return["/chapters",t]};function M(t,e){if(1&t&&(m.Ob(0,"a",5),m.Kb(1,"fa-icon",6),m.vc(2," Previous chapter"),m.Nb()),2&t){var n=m.Zb(2);m.ec("routerLink",m.hc(1,x,n.chapterNav.previousChapterId))}}function N(t,e){if(1&t&&(m.Ob(0,"a",7),m.vc(1,"Next chapter "),m.Kb(2,"fa-icon",8),m.Nb()),2&t){var n=m.Zb(2);m.ec("routerLink",m.hc(1,x,n.chapterNav.nextChapterId))}}function I(t,e){if(1&t&&(m.Ob(0,"a",5),m.Kb(1,"fa-icon",6),m.vc(2),m.Nb()),2&t){var n=m.Zb(2);m.ec("routerLink",m.hc(2,x,n.chapterNav.previousCharacterChapterId)),m.zb(2),m.xc(" Previous ",n.chapter.character," chapter")}}function k(t,e){if(1&t&&(m.Ob(0,"a",7),m.vc(1),m.Kb(2,"fa-icon",8),m.Nb()),2&t){var n=m.Zb(2);m.ec("routerLink",m.hc(2,x,n.chapterNav.nextCharacterChapterId)),m.zb(1),m.xc("Next ",n.chapter.character," chapter ")}}function L(t,e){if(1&t&&(m.Ob(0,"div",1),m.Ob(1,"div"),m.tc(2,M,3,3,"a",2),m.Nb(),m.Ob(3,"div",3),m.tc(4,N,3,3,"a",4),m.Nb(),m.Ob(5,"div"),m.tc(6,I,3,4,"a",2),m.Nb(),m.Ob(7,"div",3),m.tc(8,k,3,4,"a",4),m.Nb(),m.Nb()),2&t){var n=m.Zb();m.zb(2),m.ec("ngIf",null!=n.chapterNav.previousChapterId),m.zb(2),m.ec("ngIf",null!=n.chapterNav.nextChapterId),m.zb(2),m.ec("ngIf",null!=n.chapterNav.previousCharacterChapterId),m.zb(2),m.ec("ngIf",null!=n.chapterNav.nextCharacterChapterId)}}var z,j=((z=function(){function t(e){i(this,t),this.dataService=e}return c(t,[{key:"ngOnInit",value:function(){}},{key:"setChapter",set:function(t){t&&(this.chapter=t,this.chapterNav=new P.b(this.dataService.getPreviousChapterId(t.id),this.dataService.getNextChapterId(t.id),this.dataService.getPreviousChapterId(t.id,t.character),this.dataService.getNextChapterId(t.id,t.character)))}}]),t}()).\u0275fac=function(t){return new(t||z)(m.Jb(C.a))},z.\u0275cmp=m.Db({type:z,selectors:[["app-chapter-nav"]],inputs:{setChapter:["chapter","setChapter"]},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],["class","prev",3,"routerLink",4,"ngIf"],[1,"next"],["class","next",3,"routerLink",4,"ngIf"],[1,"prev",3,"routerLink"],["icon","angle-left"],[1,"next",3,"routerLink"],["icon","angle-right"]],template:function(t,e){1&t&&m.tc(0,L,9,4,"div",0),2&t&&m.ec("ngIf",e.chapterNav)},directives:[y.k,s.e,_.a],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto;justify-content:space-between;row-gap:1rem}.container[_ngcontent-%COMP%]   div.next[_ngcontent-%COMP%]{text-align:right}.container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1f2444;transition:color .8s;-o-transition:color .8s;-ms-transition:color .8s;-moz-transition:color .8s;-webkit-transition:color .8s;text-decoration:none}.container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#545c91}"],changeDetection:0}),z),K=o("f0Cb"),S=o("Xa2L");function J(t,e){if(1&t&&(m.Mb(0),m.Ob(1,"header",7),m.Ob(2,"h1"),m.vc(3),m.Nb(),m.Nb(),m.Lb()),2&t){var n=m.Zb();m.zb(3),m.yc("Chapter ",n.chapter.number," - ",n.chapter.title,"")}}function R(t,e){if(1&t&&(m.Mb(0),m.Kb(1,"app-chapter-nav",8),m.Kb(2,"mat-divider"),m.Lb()),2&t){var n=m.Zb();m.zb(1),m.ec("chapter",n.chapter)}}function $(t,e){}function Z(t,e){if(1&t&&(m.Mb(0),m.Kb(1,"mat-divider"),m.Kb(2,"app-chapter-nav",8),m.Lb()),2&t){var n=m.Zb();m.zb(2),m.ec("chapter",n.chapter)}}function D(t,e){1&t&&(m.Ob(0,"div",9),m.Kb(1,"mat-spinner"),m.Nb())}var X,q,E,A=((X=function(){function t(e,n,r,o,c){i(this,t),this.dataService=e,this.route=n,this.router=r,this.componentFactoryResolver=o,this.viewPortScroller=c,this.previousChapterId$=new u.a(null),this.nextChapterId$=new u.a(null),this.previousCharacterChapterId$=new u.a(null),this.nextCharacterChapterId$=new u.a(null)}return c(t,[{key:"ngOnInit",value:function(){this.isLoading$=new u.a(!0)}},{key:"ngAfterViewInit",value:function(){var t=this;this.route.paramMap.pipe(function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.a,r=(e=t)instanceof Date&&!isNaN(+e)?+t-n.now():Math.abs(t);return function(t){return t.lift(new d(r,n))}}(0)).subscribe(function(e){t.isLoading$.next(!0);var n=+e.get("id");t.LoadChapter(n)})}},{key:"LoadChapter",value:function(t){if(this.chapter=this.dataService.getChapter(t),void 0!==this.chapter){var e=this.componentFactoryResolver.resolveComponentFactory(this.chapter.component),n=this.contentHost.viewContainerRef;n.clear(),n.createComponent(e),this.isLoading$.next(!1),this.viewPortScroller.scrollToPosition([0,0])}else this.router.navigate(["not-found"])}}]),t}()).\u0275fac=function(t){return new(t||X)(m.Jb(C.a),m.Jb(s.a),m.Jb(s.c),m.Jb(m.j),m.Jb(y.q))},X.\u0275cmp=m.Db({type:X,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&m.zc(v,!0),2&t&&m.ic(n=m.Xb())&&(e.contentHost=n.first)},decls:13,vars:10,consts:[["fxLayout","column","fxLayoutAlign","start",1,"container"],[4,"ngIf"],["fxFlexAlign","center"],[4,"ngIf","ngIfElse"],[1,"chapter-content"],["appChapterContent",""],["loading",""],["fxFlexAlign","stretch"],[3,"chapter"],["fxLayout","row","fxLayoutAlign","center center",1,"spinner"]],template:function(t,e){if(1&t&&(m.Ob(0,"main",0),m.tc(1,J,4,2,"ng-container",1),m.ac(2,"async"),m.Ob(3,"mat-card",2),m.Ob(4,"mat-card-content"),m.tc(5,R,3,1,"ng-container",3),m.ac(6,"async"),m.Ob(7,"div",4),m.tc(8,$,0,0,"ng-template",5),m.Nb(),m.tc(9,Z,3,1,"ng-container",1),m.ac(10,"async"),m.tc(11,D,2,0,"ng-template",null,6,m.uc),m.Nb(),m.Nb(),m.Nb()),2&t){var n=m.jc(12);m.zb(1),m.ec("ngIf",!m.bc(2,4,e.isLoading$)),m.zb(4),m.ec("ngIf",!m.bc(6,6,e.isLoading$))("ngIfElse",n),m.zb(4),m.ec("ngIf",!m.bc(10,8,e.isLoading$))}},directives:[O.d,O.c,y.k,w.a,O.a,w.c,v,j,K.a,S.b],pipes:[y.b],styles:[".container[_ngcontent-%COMP%], .spinner[_ngcontent-%COMP%]{height:100%}header[_ngcontent-%COMP%]{background-color:hsla(0,0%,87.8%,.5);text-align:center}header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:2rem;font-size:4rem;line-height:100%}mat-card[_ngcontent-%COMP%]{padding:3rem}@media (min-width:0){mat-card[_ngcontent-%COMP%]{width:70%}}mat-card[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:1rem;position:inherit!important}[_nghost-%COMP%]     .chapter-content h1{margin-bottom:2rem;margin-top:2rem}@media (min-width:0){[_nghost-%COMP%]     .chapter-content h1{font-size:2rem}}@media (min-width:768px){[_nghost-%COMP%]     .chapter-content h1{font-size:3rem}}[_nghost-%COMP%]     .chapter-content h2{margin-top:1rem;margin-bottom:1rem;color:#2c2c2c}@media (min-width:0){[_nghost-%COMP%]     .chapter-content h2{font-size:1.5rem}}@media (min-width:768px){[_nghost-%COMP%]     .chapter-content h2{font-size:2rem}}[_nghost-%COMP%]     .chapter-content h3{margin-bottom:1rem;margin-top:1rem;color:#404040}@media (min-width:0){[_nghost-%COMP%]     .chapter-content h3{font-size:1.2rem;font-weight:700}}@media (min-width:768px){[_nghost-%COMP%]     .chapter-content h3{font-size:1.8rem}}[_nghost-%COMP%]     .chapter-content mat-divider{margin-top:1rem;margin-bottom:1rem;position:inherit!important}[_nghost-%COMP%]     .chapter-content section{padding-top:1rem}[_nghost-%COMP%]     .chapter-content .relation img{margin-right:.2rem;margin-left:.2rem}[_nghost-%COMP%]     .chapter-content .relation.small img{max-height:10px}[_nghost-%COMP%]     .chapter-content .relation.large img{max-height:20px;position:relative;top:4px}[_nghost-%COMP%]     .chapter-content .relation.up{color:#0c71b0}[_nghost-%COMP%]     .chapter-content .relation.down{color:#8f1600}[_nghost-%COMP%]     .chapter-content a{margin-top:1rem;color:#197dc5;transition:color .8s;-o-transition:color .8s;-ms-transition:color .8s;-moz-transition:color .8s;-webkit-transition:color .8s;cursor:pointer}[_nghost-%COMP%]     .chapter-content a:hover{color:#8bcbfa}"]}),X),F=[{path:"",redirectTo:"0",component:h.a,children:[{path:"",component:A}]},{path:":id",component:h.a,children:[{path:"",component:A}]}],H=((q=function t(){i(this,t)}).\u0275mod=m.Hb({type:q}),q.\u0275inj=m.Gb({factory:function(t){return new(t||q)},imports:[[s.f.forChild(F)],s.f]}),q),T=o("PCNd"),W=((E=function t(){i(this,t)}).\u0275mod=m.Hb({type:E}),E.\u0275inj=m.Gb({factory:function(t){return new(t||E)},imports:[[T.a,H]]}),E)}}])}();
//# sourceMappingURL=7-es5.970f6960775b746fc735.js.map